Дан код

```java

public class JvmComprehension {

    public static void main(String[] args) {
        int i = 1;                      // 1
        Object o = new Object();        // 2
        Integer ii = 2;                 // 3
        printAll(o, i, ii);             // 4
        System.out.println("finished"); // 7
    }

    private static void printAll(Object o, int i, Integer ii) {
        Integer uselessVar = 700;                   // 5
        System.out.println(o.toString() + i + ii);  // 6
    }
}
```

Перед тем, как описать, что делает каждая строка кода, немного опишу, как работает JVM на примере данного кода.
После работы компилятора создается файл, который содержит в себе байт-код. Так же есть специальные классы-загрузчики. При загрузке файла, который содержит в себе байт-код, JVM подсистема загрузчиков классов выделит три класса: пользовательский, системный и класс-оболочку. Все классы загружаются сначала в **Application ClassLoader**, который передает их в **Platform ClassLoader**, а он передает их **Bootstrap ClassLoader**. **Bootstrap ClassLoader** проверяет системные и класс-оболочку на наличие библиотек в JAVA. И загружает их в память. А пользовательский класс возвращает **Platform ClassLoader**, проверяет пользовательский класс в дополнительных библиотеках и возвращает его в **Application ClassLoader**, а он загружает в память. После того, как классы были определены, то они были загружены в область памяти метаспейс, в котором хранится информация о методах, переменных, имени класса и другое. При этом происходит подготовка классов к выполнению, проверка что код валиден, подготовка примитивов в статических полях и связывание ссылок на другие классы. После этого, как все загрузилось, происходит процесс инициализации классов. Затем, так как точка входа является метод main, то в области памяти стек создается фрейм памяти.


```java

int i = 1;                      // 1
// во фрейме main создает примитивную переменную типа int i к которой присваивает целое значение 1

```

```java

Object o = new Object();        // 2
// в куче конструктором new создается объект типа Object и в ссылочную переменную o 
// записывается ссылка на этот объект

```

```java

Integer ii = 2;                 // 3
// переменная ii является оберткой Integer и она будет содержать ссылку на объект 
// Integer в куче, в котором хранится целое значение 2

```

```java

printAll(o, i, ii);             // 4
// в стеке выделится новый фрейм и будут созданы переменные ссылочного типа Object
// и Integer, которым будет присвоены значения ссылок на соответсвующие обекты в куче.
// А так же будет создана переменная целого типа int, которое будет присвоено значение 1

```

```java

Integer uselessVar = 700;                   // 5
// а так же будет создана ссылочная переменная типа Integer uselessVar и она будет 
// содержать ссылку на объект Integer в куче, в котором хранится целое значение 700

```

```java

System.out.println(o.toString() + i + ii);  // 6
// метод println() потока out класса System созатся новым фреймом в стеке, где передается ссылка 
// на строку, созаднную в куче состоящую из объединений значений метода toString() o и переменных i и ii

```

```java

System.out.println("finished"); // 7
// после завершения выполнения метода printAll, выполняется метод println(), 
// которому передается ссылка на строку "finished" в куче

```

После завершение последней строки кода стековая память будет уничтожена, освобождается вся память и завершается программа.
Периодически собирает объекты из памяти(хипа), которые больше не используется.